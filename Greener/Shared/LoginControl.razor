@using System.Security.Claims 
@using Microsoft.AspNetCore.Http 
@inject IHttpContextAccessor _httpContextAccessor
@inject HttpClient Http 
@if (User.Identity.Name != null) 
{    
	<b>Hi @GivenName !</b>
	
	<a href="/Logout" target="_top">Logout</a> 
}
	else
	{     
		<a         
		href="/Login"        
		target="_top">Login</a> 
	} 
	@code 
{
	private ClaimsPrincipal User;
	private string GivenName;
	private string Surname;
	private string Avatar;
	public string Email;
	protected override void OnInitialized()
	{         
		base.OnInitialized();
		try         
		{
			User = _httpContextAccessor.HttpContext.User;             
			var givenName =                 
				_httpContextAccessor.HttpContext.User                 
				.FindFirst(ClaimTypes.GivenName);             
			if (givenName != null)             
			{                 
				GivenName = givenName.Value;
			}             
			else             
			{                 
				GivenName = User.Identity.Name;
			}                    
			var surname = _httpContextAccessor.HttpContext.User                 
			.FindFirst(ClaimTypes.Surname);             
			if (surname != null)             
			{                 
				Surname = surname.Value;
			}             
			else
			{                 
				Surname = "";
			}
			var avatar = _httpContextAccessor.HttpContext.User
			.FindFirst("urn:google:image");
			if (avatar != null)
			{
				Avatar = avatar.Value;
			}             
			else
			{
				Avatar = "";
			}
			var email = _httpContextAccessor.HttpContext.User
			.FindFirst(ClaimTypes.Email);
			if(email !=null)
			{
				Email = email.Value;
			}
		}
				catch {
				}
				} 
}